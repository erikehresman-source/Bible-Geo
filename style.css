* { box-sizing: border-box; }
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 0; background: #f6f7f8; color: #111; }
header { background: #3b5d23; color: white; padding: 1rem 1.25rem; text-align: center; }
main { padding: 1rem; max-width: 1100px; margin: 0 auto; }
#controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, auto)); gap: 0.6rem 1rem; align-items: center; margin-bottom: 1rem; }
#controls select, #controls button, #controls input[type="checkbox"] { padding: 0.6rem 0.7rem; border-radius: 8px; border: 1px solid #cfcfcf; }
#start-btn, #restart-btn, #clear-pins-btn { background: #3b5d23; color: white; border: none; cursor: pointer; padding: 0.6rem 0.7rem; border-radius: 8px; }
#clue-container { background: #fff; padding: 1rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 1rem; }
.tags { display: flex; gap: 0.4rem; flex-wrap: wrap; margin-top: 0.25rem; }
.tag { font-size: 0.8rem; padding: 0.15rem 0.5rem; border-radius: 999px; background: #eef6ea; border: 1px solid #cfe3c8; color: #2d572c; }
.hint-row { display: flex; gap: 0.5rem; align-items: center; margin-top: 0.5rem; }
#hint-btn { padding: 0.6rem 0.8rem; border-radius: 8px; border: none; background: #3b5d23; color: white; cursor: pointer; }

#choices { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 0.75rem; margin-bottom: 0.75rem; }
.choice-btn { padding: 0.75rem 1rem; border-radius: 8px; border: 1px solid #ddd; background: #fff; cursor: pointer; transition: transform 0.05s ease, box-shadow 0.1s ease; }
.choice-btn:active { transform: translateY(1px); box-shadow: inset 0 1px 3px rgba(0,0,0,0.12); }
#free-text { display: flex; gap: 0.5rem; align-items: center; margin-bottom: 0.75rem; }
#answer { flex: 1; padding: 0.75rem 0.9rem; border-radius: 8px; border: 1px solid #ccc; font-size: 1rem; }
#submit-answer { padding: 0.7rem 1rem; border-radius: 8px; border: none; background: #3b5d23; color: white; cursor: pointer; }

.hidden { display: none; }
.correct { border-color: #1a7f37 !important; background: #e9f7ef !important; }
.incorrect { border-color: #b3261e !important; background: #fdecea !important; }
.status-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 0.25rem; }
#result, #score { font-weight: 600; }
#timer { color: #333; }

#map-media-row { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 1rem; margin: 0.5rem 0 1rem; }
@media (max-width: 900px){ #map-media-row { grid-template-columns: 1fr; } }
#map-wrap { background: #fff; padding: 0.5rem 0.5rem 1rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
.map-header { margin: 0.25rem 0 0.5rem; color: #333; }
#map { width: 100%; height: 380px; border-radius: 10px; border: 1px solid #cfcfcf; position: relative; overflow: hidden; background: #dbeafe; }
#map-img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; }
#map-grid { position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; }
.map-status { text-align: center; margin-top: 0.5rem; color: #333; }
.pin { position: absolute; width: 10px; height: 10px; border-radius: 50%; background: #c62828; border: 2px solid white; transform: translate(-50%, -100%); box-shadow: 0 1px 2px rgba(0,0,0,0.2); }
.pin::after { content: ""; position: absolute; left: 50%; top: 100%; width: 2px; height: 8px; background: #c62828; transform: translateX(-50%); }
.pin-label { position: absolute; transform: translate(-50%, -140%); background: rgba(255,255,255,0.85); padding: 2px 6px; border-radius: 6px; font-size: 12px; border: 1px solid #ddd; white-space: nowrap; }
.target { position: absolute; width: 14px; height: 14px; border-radius: 50%; border: 2px dashed #2d572c; background: transparent; transform: translate(-50%, -50%); }
.ring { position: absolute; border: 2px solid rgba(0,0,0,0.15); border-radius: 50%; transform: translate(-50%, -50%); }
.pulse { position: absolute; width: 10px; height: 10px; border-radius: 50%; background: rgba(45,87,44,0.2); transform: translate(-50%, -50%); animation: pulse 1.2s ease-out 2; }
@keyframes pulse { from { width: 0; height: 0; opacity: 0.9; } to { width: 60px; height: 60px; opacity: 0; } }

.media-panel { background: #fff; padding: 0.5rem; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); display: grid; grid-template-rows: auto auto; align-items: start; }
.media-panel img { width: 100%; height: 320px; object-fit: cover; border-radius: 8px; border: 1px solid #cfcfcf; background: #fafafa; }
.media-panel figcaption { font-size: 0.9rem; color: #333; margin-top: 0.35rem; }
